jQuery.fn.extend({everyTime:function(e,t,n,r,i){return this.each(function(){jQuery.timer.add(this,e,t,n,r,i)})},oneTime:function(e,t,n){return this.each(function(){jQuery.timer.add(this,e,t,n,1)})},stopTime:function(e,t){return this.each(function(){jQuery.timer.remove(this,e,t)})}});jQuery.extend({timer:{guid:1,global:{},regex:/^([0-9]+)\s*(.*s)?$/,powers:{ms:1,cs:10,ds:100,s:1e3,das:1e4,hs:1e5,ks:1e6},timeParse:function(e){if(e===undefined||e===null)return null;var t=this.regex.exec(jQuery.trim(e.toString()));if(t[2]){var n=parseInt(t[1],10);var r=this.powers[t[2]]||1;return n*r}else{return e}},add:function(e,t,n,r,i,s){var o=0;if(jQuery.isFunction(n)){if(!i)i=r;r=n;n=t}t=jQuery.timer.timeParse(t);if(typeof t!="number"||isNaN(t)||t<=0)return;if(i&&i.constructor!=Number){s=!!i;i=0}i=i||0;s=s||false;if(!e.$timers)e.$timers={};if(!e.$timers[n])e.$timers[n]={};r.$timerID=r.$timerID||this.guid++;var u=function(){if(s&&this.inProgress)return;this.inProgress=true;if(++o>i&&i!==0||r.call(e,o)===false)jQuery.timer.remove(e,n,r);this.inProgress=false};u.$timerID=r.$timerID;if(!e.$timers[n][r.$timerID])e.$timers[n][r.$timerID]=window.setInterval(u,t);if(!this.global[n])this.global[n]=[];this.global[n].push(e)},remove:function(e,t,n){var r=e.$timers,i;if(r){if(!t){for(t in r)this.remove(e,t,n)}else if(r[t]){if(n){if(n.$timerID){window.clearInterval(r[t][n.$timerID]);delete r[t][n.$timerID]}}else{for(var n in r[t]){window.clearInterval(r[t][n]);delete r[t][n]}}for(i in r[t])break;if(!i){i=null;delete r[t]}}for(i in r)break;if(!i)e.$timers=null}}}})